(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{5443:function(e,t,n){e.exports=n(5621)},5475:function(e,t,n){},5477:function(e,t,n){},5611:function(e,t,n){},5619:function(e,t,n){},5621:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(33),c=n.n(s),l=n(31),o=n(13),i=n(158),u=(n(5452),n(30)),p=Object(l.c)({loginMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch((arguments.length>1?arguments[1]:void 0).type){case"CLEAR_LOGIN_ERROR":return"";case"LOGIN_INPUT_ERROR":return"Enter your username and password!";case"LOGIN_FAILED":return"Oops! The username and password didn't match. Try again!";case"LOGIN_FAILED_NO_CODE":return"Oops! Something went wrong! Is the server running?";default:return e}},registrationMessage:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";switch((arguments.length>1?arguments[1]:void 0).type){case"CLEAR_REGISTRATION_ERROR":return"";case"REGISTRATION_INPUT_ERROR":return"Choose a username and password!";case"REGISTRATION_FAILED":return"Oops! That didn't work. The username might already be taken. Try again!";default:return e}}}),d=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"login";switch((arguments.length>1?arguments[1]:void 0).type){case"SET_TO_LOGIN_MODE":return"login";case"SET_TO_REGISTER_MODE":return"register";default:return e}},m=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":return t.payload;case"UNSET_USER":return{};default:return e}},h=Object(l.c)({clients:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SET_CLIENTS"===t.type?t.payload:e},currentClient:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SET_CURRENT_CLIENT"===t.type?t.payload:e}}),E=Object(l.c)({sessions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return"SET_SESSIONS"===t.type?t.payload:e}}),f=Object(l.c)({errors:p,loginMode:d,user:m,clients:h,sessions:E}),b=n(8),v=n.n(b),O=n(9),g=n(25),C=n.n(g),y=v.a.mark(_),j=v.a.mark(S),w=v.a.mark(x);function _(e){var t;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,Object(O.b)({type:"CLEAR_LOGIN_ERROR"});case 3:return t={headers:{"Content-Type":"application/json"},withCredentials:!0},n.next=6,C.a.post("api/user/login",e.payload,t);case 6:return n.next=8,Object(O.b)({type:"FETCH_USER"});case 8:n.next=20;break;case 10:if(n.prev=10,n.t0=n.catch(0),console.log("Error with user login:",n.t0),401!==n.t0.response.status){n.next=18;break}return n.next=16,Object(O.b)({type:"LOGIN_FAILED"});case 16:n.next=20;break;case 18:return n.next=20,Object(O.b)({type:"LOGIN_FAILED_NO_CODE"});case 20:case"end":return n.stop()}},y,this,[[0,10]])}function S(e){var t;return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t={headers:{"Content-Type":"application/json"},withCredentials:!0},e.next=4,C.a.post("api/user/logout",t);case 4:return e.next=6,Object(O.b)({type:"UNSET_USER"});case 6:e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log("Error with user logout:",e.t0);case 11:case"end":return e.stop()}},j,this,[[0,8]])}function x(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.c)("LOGIN",_);case 2:return e.next=4,Object(O.c)("LOGOUT",S);case 4:case"end":return e.stop()}},w,this)}var T=x,N=v.a.mark(I),k=v.a.mark(R);function I(e){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(O.b)({type:"CLEAR_REGISTRATION_ERROR"});case 3:return t.next=5,C.a.post("api/user/register",e.payload);case 5:return t.next=7,Object(O.b)({type:"LOGIN",payload:e.payload});case 7:return t.next=9,Object(O.b)({type:"SET_TO_LOGIN_MODE"});case 9:t.next=16;break;case 11:return t.prev=11,t.t0=t.catch(0),console.log("Error with user registration:",t.t0),t.next=16,Object(O.b)({type:"REGISTRATION_FAILED"});case 16:case"end":return t.stop()}},N,this,[[0,11]])}function R(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.c)("REGISTER",I);case 2:case"end":return e.stop()}},k,this)}var L=R,F=v.a.mark(A),D=v.a.mark(M);function A(){var e,t;return v.a.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e={headers:{"Content-Type":"application/json"},withCredentials:!0},n.next=4,C.a.get("api/user",e);case 4:return t=n.sent,n.next=7,Object(O.b)({type:"SET_USER",payload:t.data});case 7:n.next=12;break;case 9:n.prev=9,n.t0=n.catch(0),console.log("User get request failed",n.t0);case 12:case"end":return n.stop()}},F,this,[[0,9]])}function M(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.c)("FETCH_USER",A);case 2:case"end":return e.stop()}},D,this)}var G=M,P=v.a.mark(V),U=v.a.mark(W),H=v.a.mark(J),q=v.a.mark(z),Y=v.a.mark(B);function V(e){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.post("/api/clients",e.payload);case 3:return t.next=5,Object(O.b)({type:"FETCH_CLIENTS"});case 5:alert("Client added!"),t.next=12;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Error adding clients",t.t0),alert("Error adding client");case 12:case"end":return t.stop()}},P,this,[[0,8]])}function W(e){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,C.a.delete("/api/sessions/remove?id=".concat(e.payload)),alert("Sucess!"),t.next=5,Object(O.b)({type:"FETCH_CLIENTS"});case 5:t.next=11;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error deleting client",t.t0),alert("Error deleting client. Please try again.");case 11:case"end":return t.stop()}},U,this,[[0,7]])}function J(e){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log(e.payload),t.next=4,C.a.put("/api/clients",e.payload);case 4:return t.next=6,Object(O.b)({type:"FETCH_CLIENTS"});case 6:alert("Client edited!"),t.next=13;break;case 9:t.prev=9,t.t0=t.catch(0),console.log("Error editing client",t.t0),alert("Error editing client. Please try again.");case 13:case"end":return t.stop()}},H,this,[[0,9]])}function z(){var e;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.get("/api/clients");case 3:return e=t.sent,t.next=6,Object(O.b)({type:"SET_CLIENTS",payload:e.data});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Error fetching clients",t.t0);case 11:case"end":return t.stop()}},q,this,[[0,8]])}function B(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.c)("FETCH_CLIENTS",z);case 2:return e.next=4,Object(O.c)("ADD_CLIENT",V);case 4:return e.next=6,Object(O.c)("EDIT_CLIENT",J);case 6:return e.next=8,Object(O.c)("DELETE_CLIENT",W);case 8:case"end":return e.stop()}},Y,this)}var K=B,Q=n(39),X=n.n(Q),Z=v.a.mark(ae),$=v.a.mark(re),ee=v.a.mark(se),te=v.a.mark(ce),ne=v.a.mark(le);function ae(e){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.delete("/api/sessions/clear?id=".concat(e.payload));case 3:return alert("Card cleared!"),t.next=6,Object(O.b)({type:"FETCH_CLIENTS"});case 6:return t.next=8,Object(O.b)({type:"FETCH_SESSIONS"});case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("Error deleting card",t.t0);case 13:case"end":return t.stop()}},Z,this,[[0,10]])}function re(e){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.delete("/api/sessions?id=".concat(e.payload.session_id));case 3:return alert("Session on ".concat(X()(e.payload.date).format("MM/DD/YYYY")," deleted.")),t.next=6,Object(O.b)({type:"FETCH_SESSIONS"});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Error deleting session",t.t0);case 11:case"end":return t.stop()}},$,this,[[0,8]])}function se(){var e;return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.get("/api/sessions");case 3:return e=t.sent,t.next=6,Object(O.b)({type:"SET_SESSIONS",payload:e.data});case 6:t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("Error fetching sessions",t.t0);case 11:case"end":return t.stop()}},ee,this,[[0,8]])}function ce(e){return v.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,C.a.post("/api/sessions",e.payload);case 3:return t.next=5,Object(O.b)({type:"FETCH_SESSIONS"});case 5:t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log("Error fetching clients",t.t0);case 10:case"end":return t.stop()}},te,this,[[0,7]])}function le(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.c)("LOG_SESSION",ce);case 2:return e.next=4,Object(O.c)("FETCH_SESSIONS",se);case 4:return e.next=6,Object(O.c)("DELETE_SESSION",re);case 6:return e.next=8,Object(O.c)("CLEAR_CARD",ae);case 8:case"end":return e.stop()}},ne,this)}var oe=le,ie=v.a.mark(ue);function ue(){return v.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(O.a)([T(),L(),G(),K(),oe()]);case 2:case"end":return e.stop()}},ie,this)}var pe=n(15),de=n(16),me=n(18),he=n(17),Ee=n(19),fe=n(5624),be=n(5625),ve=n(5623),Oe=n(5626),ge=n(5622),Ce=Object(o.b)()(function(e){return r.a.createElement("button",{className:e.className,onClick:function(){return e.dispatch({type:"LOGOUT"})}},"Log Out")}),ye=(n(5475),Object(o.b)(function(e){return{user:e.user}})(function(e){return r.a.createElement("div",{className:"nav"},r.a.createElement(ge.a,{to:"/home"},r.a.createElement("h2",{className:"nav-title"},"Fitness Meets Wellness Session Tracker")),r.a.createElement("div",{className:"nav-right"},r.a.createElement(ge.a,{className:"nav-link",to:"/home"},e.user.id?"Home":"Login / Register"),e.user.id&&r.a.createElement(r.a.Fragment,null,r.a.createElement(ge.a,{className:"nav-link",to:"/clients"},"Manage Clients"),r.a.createElement(Ce,{className:"nav-link"}))))})),je=(n(5477),function(){return r.a.createElement("footer",null,r.a.createElement("p",{className:"center-footer"},"Fitness Meets Wellness \xa9 2018 "))}),we=n(159),_e=n(28),Se=n(4),xe=function(e){function t(){var e,n;Object(pe.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(me.a)(this,(e=Object(he.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},n.login=function(e){e.preventDefault(),n.state.username&&n.state.password?n.props.dispatch({type:"LOGIN",payload:{username:n.state.username,password:n.state.password}}):n.props.dispatch({type:"LOGIN_INPUT_ERROR"})},n.handleInputChangeFor=function(e){return function(t){n.setState(Object(_e.a)({},e,t.target.value))}},n.resetPassword=function(){console.log("in reset password"),n.props.history.push("/resetpassword")},n}return Object(Ee.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"login-form"},this.props.errors.loginMessage&&r.a.createElement("h2",{className:"alert",role:"alert"},this.props.errors.loginMessage),r.a.createElement("h1",null,"Login"),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"username"},"Username:",r.a.createElement(Se.q,{type:"text",name:"username",autoComplete:"off",value:this.state.username,onChange:this.handleInputChangeFor("username")}))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"password"},"Password:",r.a.createElement(Se.q,{type:"password",name:"password",autoComplete:"off",value:this.state.password,onChange:this.handleInputChangeFor("password")}))),r.a.createElement("div",{className:"button-margin"},r.a.createElement(Se.a,{variant:"contained",color:"primary",onClick:this.login},"Login"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement(Se.a,{onClick:this.resetPassword},"Forgot Password?")))}}]),t}(a.Component),Te=Object(o.b)(function(e){return{errors:e.errors}})(xe),Ne=function(e){function t(){var e,n;Object(pe.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(me.a)(this,(e=Object(he.a)(t)).call.apply(e,[this].concat(r)))).state={username:"",password:""},n.registerUser=function(e){e.preventDefault(),n.state.username&&n.state.password?n.props.dispatch({type:"REGISTER",payload:{username:n.state.username,password:n.state.password}}):n.props.dispatch({type:"REGISTRATION_INPUT_ERROR"})},n.handleInputChangeFor=function(e){return function(t){n.setState(Object(_e.a)({},e,t.target.value))}},n}return Object(Ee.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,this.props.errors.registrationMessage&&r.a.createElement("h2",{className:"alert",role:"alert"},this.props.errors.registrationMessage),r.a.createElement("form",{onSubmit:this.registerUser},r.a.createElement("h1",null,"Register User"),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"username"},"Username:",r.a.createElement("input",{type:"text",name:"username",value:this.state.username,onChange:this.handleInputChangeFor("username")}))),r.a.createElement("div",null,r.a.createElement("label",{htmlFor:"password"},"Password:",r.a.createElement("input",{type:"password",name:"password",value:this.state.password,onChange:this.handleInputChangeFor("password")}))),r.a.createElement("div",null,r.a.createElement("input",{className:"register",type:"submit",name:"submit",value:"Register"}))),r.a.createElement("center",null,r.a.createElement("button",{type:"button",className:"link-button",onClick:function(){e.props.dispatch({type:"SET_TO_LOGIN_MODE"})}},"Login")))}}]),t}(a.Component),ke=Object(o.b)(function(e){return{errors:e.errors}})(Ne),Ie=Object(o.b)(function(e){return{user:e.user,loginMode:e.loginMode}})(function(e){var t,n=e.component,a=e.user,s=e.loginMode,c=Object(we.a)(e,["component","user","loginMode"]);return t=a.id?n:"login"===s?Te:ke,r.a.createElement(Oe.a,Object.assign({},c,{component:t}))}),Re=(n(5611),n(40)),Le=function(e){function t(e){var n;return Object(pe.a)(this,t),(n=Object(me.a)(this,Object(he.a)(t).call(this,e))).getDate=function(){var e=new Date,t=X()(e).format("YYYY-MM-DD");n.setState({date:t}),console.log(t)},n.handleChangeFor=function(e,t){n.setState(Object(_e.a)({},t,e.target.value))},n.handleClose=function(){n.setState({open:!1})},n.handleOpen=function(){n.setState({open:!0})},n.logSession=function(){n.handleClose(),n.props.dispatch({type:"LOG_SESSION",payload:{client:n.state.client,date:n.state.date}})},n.state={open:!1,date:"",client:parseInt(n.props.client.id)},n}return Object(Ee.a)(t,e),Object(de.a)(t,[{key:"componentDidMount",value:function(){this.getDate()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"sticky-right"},r.a.createElement(Se.i,{onClick:this.handleOpen,color:"primary",variant:"contained"},r.a.createElement(Re.a,null)),r.a.createElement(Se.b,{open:this.state.open,onClose:this.handleClose},r.a.createElement(Se.f,null,"Log Session"),r.a.createElement(Se.d,null,r.a.createElement(Se.e,null,"Select Date"),r.a.createElement(Se.q,{onChange:function(t){return e.handleChangeFor(t,"date")},type:"date",value:this.state.date})),r.a.createElement(Se.c,null,r.a.createElement(Se.a,{onClick:this.handleClose},"Cancel"),r.a.createElement(Se.a,{color:"primary",variant:"contained",onClick:this.logSession},"Submit"))))}}]),t}(a.Component),Fe=Object(o.b)(function(e){return{user:e.user}})(Le),De=function(e){function t(e){var n;return Object(pe.a)(this,t),(n=Object(me.a)(this,Object(he.a)(t).call(this,e))).emailReminder=function(){n.setState({open:!1}),C()({method:"POST",url:"/api/clients/email",data:{recipient:n.props.client.email_address,name:n.props.client.first_name,sessionsLeft:n.props.client.sessions-n.props.session.length}}).then(function(e){alert("Reminder sent to ".concat(n.props.client.first_name," ").concat(n.props.client.last_name,"!"))}).catch(function(e){console.log("Error sending reminder. Please try again",e)})},n.handleClose=function(){n.setState({open:!1})},n.handleOpen=function(){n.setState({open:!0})},n.state={open:!1,subject:"Fitness Meets Wellness Session Renewal Reminder"},n}return Object(Ee.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this.props.client.sessions-this.props.session.length,t="Hi ".concat(this.props.client.first_name,"!\nJust a reminder that your prepaid sessions are almost complete. You have ").concat(e," more sessions until your card is full. \n\nYou can renew your sessions in the studio  at your convenience. Thank you for your continued support and great efforts on your fitness goals! See you soon!\n\nBe well!   \nSue Mackenzie");return r.a.createElement("div",null,r.a.createElement(Se.i,{variant:"contained",color:"secondary",onClick:this.handleOpen},r.a.createElement(Re.c,null)),r.a.createElement(Se.b,{open:this.state.open,onClose:this.handleClose,fullWidth:!0},r.a.createElement(Se.f,null,"Send Reminder "),r.a.createElement(Se.d,null,r.a.createElement(Se.e,null,"To: ",this.props.client.first_name," ",this.props.client.last_name),r.a.createElement(Se.e,null,"Subject: ",r.a.createElement(Se.q,{value:this.state.subject,disabled:!0,fullWidth:!0})),r.a.createElement(Se.e,null,"Message: ",r.a.createElement(Se.q,{value:t,disabled:!0,fullWidth:!0,multiline:!0})),r.a.createElement(Se.c,null,r.a.createElement(Se.a,{onClick:this.handleClose},"Cancel"),r.a.createElement(Se.a,{onClick:this.emailReminder,variant:"contained",color:"primary"},"Send")))))}}]),t}(a.Component),Ae=Object(o.b)(function(e){return{client:e.clients.currentClient[0]}})(De),Me=function(e){function t(){var e,n;Object(pe.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(me.a)(this,(e=Object(he.a)(t)).call.apply(e,[this].concat(r)))).clearCard=function(){window.confirm("Are you sure to you want to clear this card? All records will be deleted and prepaid sessions will be reset to 0.")&&n.props.dispatch({type:"CLEAR_CARD",payload:n.props.currentClient.id})},n.handleDelete=function(e){window.confirm("Are you sure you want to delete this session?")&&n.props.dispatch({type:"DELETE_SESSION",payload:e})},n}return Object(Ee.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this,t=this.props.sessions.filter(function(t){return t.client_id===e.props.currentClient.id});return r.a.createElement("div",{className:"flex-container"},r.a.createElement("div",{className:"card"},r.a.createElement("div",{className:"flex-box-header"},r.a.createElement("h3",null,this.props.currentClient.first_name," ",this.props.currentClient.last_name),r.a.createElement("div",{className:"flex-box-right"},t.length>=this.props.currentClient.sessions-3&&r.a.createElement(Ae,{session:t}),t.length<this.props.currentClient.sessions&&r.a.createElement(Fe,{client:this.props.currentClient}))),r.a.createElement("p",null,"Prepaid for ",this.props.currentClient.sessions," sessions"),r.a.createElement("div",{className:"flex-box"},t.map(function(t,n){return r.a.createElement("div",{className:"date",key:n},r.a.createElement("p",null,n+1,". ",X()(t.date).format("MM/DD/YYYY")," ",r.a.createElement(Se.i,null,r.a.createElement(Re.b,{onClick:function(){return e.handleDelete(t)}}))))})),t.length>0&&r.a.createElement("div",{className:"bottom"},r.a.createElement(Se.a,{variant:"contained",onClick:this.clearCard},"Clear Card"))))}}]),t}(a.Component),Ge=Object(o.b)(function(e){return{sessions:e.sessions.sessions,currentClient:e.clients.currentClient[0]}})(Me),Pe=function(e){function t(e){var n;return Object(pe.a)(this,t),(n=Object(me.a)(this,Object(he.a)(t).call(this,e))).getClients=function(){n.props.dispatch({type:"FETCH_CLIENTS"})},n.getSessions=function(){n.props.dispatch({type:"FETCH_SESSIONS"})},n.handleClientChange=function(e){var t=parseInt(e.target.value),a=n.props.clients.filter(function(e){return e.id===t});n.props.dispatch({type:"SET_CURRENT_CLIENT",payload:a})},n.state={open:!1},n}return Object(Ee.a)(t,e),Object(de.a)(t,[{key:"componentDidMount",value:function(){this.getClients(),this.getSessions()}},{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement("div",{className:"flex-container"},r.a.createElement("h2",null,"Select a Client")),r.a.createElement("div",{className:"flex-container"},r.a.createElement(Se.k,{onChange:function(t){return e.handleClientChange(t)}},r.a.createElement("option",{value:""}),this.props.clients.map(function(e,t){return r.a.createElement("option",{key:t,value:e.id},e.first_name," ",e.last_name)}))),this.props.currentClient.length>0&&r.a.createElement(Ge,null))}}]),t}(a.Component),Ue=Object(o.b)(function(e){return{user:e.user,clients:e.clients.clients,currentClient:e.clients.currentClient}})(Pe),He=n(69),qe=function(e){function t(e){var n;return Object(pe.a)(this,t),(n=Object(me.a)(this,Object(he.a)(t).call(this,e))).editClient=function(){n.setState({open:!1}),n.props.dispatch({type:"EDIT_CLIENT",payload:{first_name:n.state.first_name,last_name:n.state.last_name,email_address:n.state.email_address,sessions:n.state.sessions,id:n.props.clientToEdit.id}})},n.handleOpen=function(){n.setState({open:!0})},n.handleClose=function(){n.setState({open:!1})},n.handleChangeFor=function(e,t){n.setState(Object(He.a)({},n.state,Object(_e.a)({},t,e.target.value)))},n.state={open:!1,first_name:n.props.clientToEdit.first_name,last_name:n.props.clientToEdit.last_name,email_address:n.props.clientToEdit.email_address,sessions:n.props.clientToEdit.sessions},n}return Object(Ee.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",null,r.a.createElement(Se.a,{onClick:this.handleOpen},"Edit"),r.a.createElement(Se.b,{open:this.state.open,onClose:this.handleClose,fullWidth:!0},r.a.createElement(Se.f,null,"Edit Client Details"),r.a.createElement(Se.d,null,r.a.createElement(Se.q,{type:"text",label:"First Name",defaultValue:this.props.clientToEdit.first_name,onChange:function(t){return e.handleChangeFor(t,"first_name")}}),r.a.createElement(Se.q,{type:"text",label:"Last Name",defaultValue:this.props.clientToEdit.last_name,onChange:function(t){return e.handleChangeFor(t,"last_name")}}),r.a.createElement(Se.q,{type:"text",label:"Email Address",defaultValue:this.props.clientToEdit.email_address,onChange:function(t){return e.handleChangeFor(t,"email_address")}}),r.a.createElement(Se.q,{type:"text",label:"Total Prepaid Sessions",defaultValue:this.props.clientToEdit.sessions,onChange:function(t){return e.handleChangeFor(t,"sessions")}}),r.a.createElement(Se.c,null,r.a.createElement(Se.a,{onClick:this.handleClose},"Cancel"),r.a.createElement(Se.a,{onClick:this.editClient,variant:"contained",color:"primary"},"Save")))))}}]),t}(a.Component),Ye=Object(o.b)()(qe),Ve=function(e){function t(){var e,n;Object(pe.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(me.a)(this,(e=Object(he.a)(t)).call.apply(e,[this].concat(r)))).handleDelete=function(){window.confirm("Are you sure you want to delete ".concat(n.props.client.first_name," ").concat(n.props.client.last_name,"? This action cannot be undone."))?n.props.dispatch({type:"DELETE_CLIENT",payload:n.props.client.id}):alert("".concat(n.props.client.first_name," ").concat(n.props.client.last_name," saved!"))},n}return Object(Ee.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement(Se.i,{onClick:function(){return e.handleDelete(e.props.client.id)}},r.a.createElement(Re.b,null))}}]),t}(a.Component),We=Object(o.b)()(Ve),Je=function(e){function t(){return Object(pe.a)(this,t),Object(me.a)(this,Object(he.a)(t).apply(this,arguments))}return Object(Ee.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){return r.a.createElement(Se.p,null,r.a.createElement(Se.n,null,this.props.client.first_name),r.a.createElement(Se.n,null,this.props.client.last_name),r.a.createElement(Se.n,null,this.props.client.email_address),r.a.createElement(Se.n,null,this.props.client.sessions),r.a.createElement(Se.n,null,r.a.createElement(Ye,{clientToEdit:this.props.client})),r.a.createElement(Se.n,null,r.a.createElement(We,{client:this.props.client})))}}]),t}(a.Component),ze=Object(o.b)()(Je),Be=function(e){function t(e){var n;return Object(pe.a)(this,t),(n=Object(me.a)(this,Object(he.a)(t).call(this,e))).addClient=function(){n.props.dispatch({type:"ADD_CLIENT",payload:n.state}),n.setState({view:"edit",first_name:"",last_name:"",email_address:"",sessions:0})},n.setView=function(e){n.setState({view:e})},n.handleChangeFor=function(e,t){n.setState(Object(He.a)({},n.state,Object(_e.a)({},t,e.target.value)))},n.state={view:"edit",first_name:"",last_name:"",email_address:"",sessions:0},n}return Object(Ee.a)(t,e),Object(de.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"FETCH_CLIENTS"})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"body-div"},r.a.createElement("div",{className:"flex-container-header"},r.a.createElement("h2",null,"Manage Clients")),"add"!==this.state.view&&r.a.createElement("div",{className:"center"},r.a.createElement(Se.a,{variant:"contained",color:"secondary",onClick:function(){return e.setView("add")}},"Add Client")),r.a.createElement("div",{className:"flex-container"},"add"===this.state.view&&r.a.createElement("div",{className:"add-form"},r.a.createElement(Se.q,{autoComplete:"off",type:"text",variant:"outlined",label:"First Name",value:this.state.first_name,onChange:function(t){return e.handleChangeFor(t,"first_name")}}),r.a.createElement(Se.q,{autoComplete:"off",type:"text",variant:"outlined",label:"Last Name",value:this.state.last_name,onChange:function(t){return e.handleChangeFor(t,"last_name")}}),r.a.createElement(Se.q,{autoComplete:"off",type:"text",variant:"outlined",label:"Email Address",value:this.state.email_address,onChange:function(t){return e.handleChangeFor(t,"email_address")}}),r.a.createElement(Se.q,{autoComplete:"off",type:"number",variant:"outlined",label:"Sessions Purchased",onChange:function(t){return e.handleChangeFor(t,"sessions")}}),r.a.createElement(Se.a,{color:"primary",variant:"contained",size:"large",onClick:this.addClient},"Add"),r.a.createElement(Se.a,{onClick:function(){return e.setView("edit")}},"Cancel")),"edit"===this.state.view&&r.a.createElement("div",null,r.a.createElement(Se.l,{className:"manage-table"},r.a.createElement(Se.o,null,r.a.createElement(Se.p,null,r.a.createElement(Se.n,null,"First Name"),r.a.createElement(Se.n,null,"Last Name"),r.a.createElement(Se.n,null,"Email"),r.a.createElement(Se.n,null,"Prepaid Sessions"),r.a.createElement(Se.n,null,"Edit"),r.a.createElement(Se.n,null,"Delete"))),r.a.createElement(Se.m,null,this.props.clients.map(function(e,t){return r.a.createElement(ze,{key:t,client:e})}))))))}}]),t}(a.Component),Ke=Object(o.b)(function(e){return{user:e.user,clients:e.clients.clients}})(Be),Qe=function(e){function t(e){var n;return Object(pe.a)(this,t),(n=Object(me.a)(this,Object(he.a)(t).call(this,e))).handleChange=function(e){n.setState({email:e.target.value})},n.handleSubmit=function(){var e=Date.now();e=X()(e).format(),C()({method:"PUT",url:"/api/user/createtoken",data:{email:n.state.email,today:e}}).then(function(e){alert("Please check your e-mail (including your spam folder) for a link to reset your password."),n.props.history.push("/home")}).catch(function(e){console.log(e),alert("Something went wrong")})},n.state={email:""},n}return Object(Ee.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"reset-form"},r.a.createElement("h2",null,"Reset Password"),r.a.createElement(Se.g,null,"Enter the email address associated with this account."),r.a.createElement(Se.q,{id:"email-input",onChange:this.handleChange})),r.a.createElement(Se.a,{variant:"contained",color:"primary",onClick:this.handleSubmit},"Submit"),r.a.createElement(Se.a,{onClick:function(){return e.props.history.push("/home")}},"Cancel"))}}]),t}(a.Component),Xe=function(e){function t(e){var n;return Object(pe.a)(this,t),(n=Object(me.a)(this,Object(he.a)(t).call(this,e))).handleChange=function(e,t){var a,r=new Date;n.setState((a={},Object(_e.a)(a,e,t.target.value),Object(_e.a)(a,"today",r),a))},n.handleSubmit=function(){n.state.password===n.state.confirm_password?C()({method:"PUT",url:"/api/user/resetpassword",data:n.state}).then(function(e){alert("Update successful! Please login with your new password."),n.props.history.push("/home")}).catch(function(e){console.log(e),alert("Something went wrong")}):alert("Passwords do not match! Please try again.")},n.state={email_address:"",password:"",confirm_password:"",today:"",token:n.props.match.params.token},n}return Object(Ee.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"center"},r.a.createElement("div",{className:"reset-form"},r.a.createElement("h2",null,"Create New Password"),r.a.createElement(Se.g,null,"Email address:",r.a.createElement(Se.j,{onChange:function(t){return e.handleChange("email_address",t)}}),r.a.createElement("br",null)),r.a.createElement(Se.g,null,"New password:",r.a.createElement(Se.j,{type:"password",onChange:function(t){return e.handleChange("password",t)}}),r.a.createElement("br",null)),r.a.createElement(Se.g,null,"Confirm password:",r.a.createElement(Se.j,{type:"password",onChange:function(t){return e.handleChange("confirm_password",t)}}),r.a.createElement("br",null))),r.a.createElement(Se.a,{variant:"contained",color:"primary",onClick:this.handleSubmit},"Submit"),r.a.createElement(Se.a,{onClick:function(){return e.props.history.push("/home")}},"Cancel"))}}]),t}(a.Component),Ze=function(e){function t(){return Object(pe.a)(this,t),Object(me.a)(this,Object(he.a)(t).apply(this,arguments))}return Object(Ee.a)(t,e),Object(de.a)(t,[{key:"render",value:function(){var e=this.props.classes;return r.a.createElement(Se.h,{container:!0,spacing:0},r.a.createElement(Se.h,{item:!0,xs:!1,md:12,style:{height:"10vh"}}),r.a.createElement(Se.h,{item:!0,xs:!1,md:1}),r.a.createElement(Se.h,{className:e.content,item:!0,xs:12,md:10},this.props.children),r.a.createElement(Se.h,{item:!0,xs:!1,md:1}),r.a.createElement(Se.h,{item:!0,xs:!1,md:12,style:{height:"10vh"}}))}}]),t}(r.a.Component),$e=Object(u.withStyles)(function(e){var t;return{content:(t={backgroundColor:"white"},Object(_e.a)(t,e.breakpoints.down("sm"),{height:"100vh"}),Object(_e.a)(t,e.breakpoints.up("md"),{height:"80vh"}),t)}})(Ze),et=(n(5619),function(e){function t(){return Object(pe.a)(this,t),Object(me.a)(this,Object(he.a)(t).apply(this,arguments))}return Object(Ee.a)(t,e),Object(de.a)(t,[{key:"componentDidMount",value:function(){this.props.dispatch({type:"FETCH_USER"})}},{key:"render",value:function(){return r.a.createElement($e,null,r.a.createElement(fe.a,null,r.a.createElement("div",null,r.a.createElement(ye,null),r.a.createElement(be.a,null,r.a.createElement(ve.a,{exact:!0,from:"/",to:"/home"}),r.a.createElement(Ie,{exact:!0,path:"/home",component:Ue}),r.a.createElement(Ie,{exact:!0,path:"/clients",component:Ke}),r.a.createElement(Oe.a,{exact:!0,path:"/resetpassword/",component:Qe}),r.a.createElement(Oe.a,{exact:!0,path:"/resetpassword/:token",component:Xe}),r.a.createElement(Oe.a,{render:function(){return r.a.createElement("h1",null,"404: Page Not Found")}})),r.a.createElement(je,null))))}}]),t}(a.Component)),tt=Object(o.b)()(et),nt=Object(i.a)(),at=[nt],rt=Object(l.d)(f,l.a.apply(void 0,at)),st=Object(u.createMuiTheme)({typography:{useNextVariants:!0},palette:{primary:{main:"#1fcecb"},secondary:{main:"#1a237e"},error:{main:"#c51162"}}});nt.run(ue),c.a.render(r.a.createElement(o.a,{store:rt},r.a.createElement(u.MuiThemeProvider,{theme:st},r.a.createElement(tt,null))),document.getElementById("react-root"))}},[[5443,2,1]]]);
//# sourceMappingURL=main.6777a788.chunk.js.map